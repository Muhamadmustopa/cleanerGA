<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Laporan Staff</title>

<style>
body{
  font-family:Segoe UI,Arial;
  background:#f4f6f8;
  padding:20px;
  margin:0;
}
.top-bar{
  margin-bottom:10px;
}
.top-bar button{
  background:#2196f3;
  color:#fff;
  border:none;
  padding:8px 14px;
  border-radius:8px;
  cursor:pointer;
}
.card{
  max-width:1100px;
  margin:auto;
  background:#fff;
  padding:16px;
  border-radius:12px;
  box-shadow:0 6px 14px rgba(0,0,0,.1);
}
table{
  width:100%;
  border-collapse:collapse;
}
th,td{
  padding:8px;
  border-bottom:1px solid #eee;
}
.badge{
  padding:4px 8px;
  border-radius:999px;
  font-size:12px;
}
.ok{background:#e8f5e9;color:#2e7d32}
.progress{background:#fff3e0;color:#ef6c00}
.btn{
  padding:5px 8px;
  border:none;
  border-radius:6px;
  cursor:pointer;
  font-size:12px;
}
.edit{background:#2196f3;color:#fff}
.delete{background:#f44336;color:#fff}
</style>
</head>

<body>

<div class="top-bar">
  <button onclick="goBack()">Keluar</button>
</div>

<div class="card">
  <h2>ðŸ“‹ Laporan Staff</h2>

  <table>
    <thead>
      <tr>
        <th>Tanggal</th>
        <th>Staff</th>
        <th>Kategori</th>
        <th>Detail</th>
        <th>Status</th>
        <th>Aksi</th>
      </tr>
    </thead>
    <tbody id="tbody"></tbody>
  </table>
</div>

<script>

const SCRIPT_URL="ISI_URL_WEBAPP_KAMU";

let rawData=[];
const tbody=document.getElementById("tbody");

function loadData(){
  fetch(SCRIPT_URL+"?action=reportStaff")
    .then(res=>res.json())
    .then(res=>{
      rawData=res.data || [];
      render();
    })
    .catch(err=>{
      console.log(err);
      tbody.innerHTML="<tr><td colspan='6'>Gagal load data</td></tr>";
    });
}

function render(){
  tbody.innerHTML="";

  if(rawData.length===0){
    tbody.innerHTML="<tr><td colspan='6'>Tidak ada data</td></tr>";
    return;
  }

  rawData.forEach((d,i)=>{
    tbody.innerHTML+=`
      <tr>
        <td>${d.tanggal}</td>
        <td>${d.staff}</td>
        <td>${d.tipe}</td>
        <td>${d.uraian}</td>
        <td>
          <span class="badge ${d.status==='DONE'?'ok':'progress'}">
            ${d.status}
          </span>
        </td>
        <td>
          <button class="btn edit" onclick="editData(${i})">Edit</button>
          <button class="btn delete" onclick="deleteData('${d.id}')">Hapus</button>
        </td>
      </tr>
    `;
  });
}

function editData(index){
  const d=rawData[index];
  const detail=prompt("Edit Detail:",d.uraian);
  if(detail===null) return;
  alert("Contoh edit berhasil (backend belum dihubungkan)");
}

function deleteData(id){
  alert("Contoh delete (backend belum dihubungkan)");
}

function goBack(){
  window.location.href="login.html";
}

loadData();

</script>

</body>
</html>
