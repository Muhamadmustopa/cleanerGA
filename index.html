
<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Dashboard - Daily Task</title>
<style>
body{font-family:Arial;background:#f4f6f8;padding:20px}
.card{background:#fff;padding:20px;max-width:900px;margin:auto;border-radius:8px}
table{width:100%;border-collapse:collapse}
th,td{border:1px solid #ccc;padding:8px}
th{background:#eee}
.warn{color:red;font-weight:bold}
.date-warn{border:2px solid red}
</style>
</head>
<body>

<div class="card">
  <button onclick="logout()">Keluar</button>
  <h3 id="user"></h3>

  Tanggal:
  <input type="date" id="tanggal">
  <span id="warning" class="warn">Wajib Diisi</span>

  <table>
    <thead>
      <tr><th>Area</th><th>List Pekerjaan</th><th>Status Selesai</th><th>Keterangan</th></tr>
    </thead>
    <tbody>
      <tr><td>Semua Area</td><td>Sapu & Pel Lantai</td><td><input type="checkbox"></td><td><input></td></tr>
      <tr><td>Ruang Kerja</td><td>Vacum Karpet Lantai</td><td><input type="checkbox"></td><td><input></td></tr>
      <tr><td>Semua Area</td><td>Lap Pintu Kaca</td><td><input type="checkbox"></td><td><input></td></tr>
      <tr><td>Ruang Kerja</td><td>Lap Meja Kerja</td><td><input type="checkbox"></td><td><input></td></tr>
      <tr><td>Ruang Kerja</td><td>Lap Telephone</td><td><input type="checkbox"></td><td><input></td></tr>
      <tr><td>Ruang Kerja</td><td>Menyalakan Lampu,AC,Blue Air</td><td><input type="checkbox"></td><td><input></td></tr>
      <tr><td>Pantry</td><td>Cuci Alat Makan</td><td><input type="checkbox"></td><td><input></td></tr>
      <tr><td>Pantry</td><td>Bersihkan Wastafel dan Cek Saluran</td><td><input type="checkbox"></td><td><input></td></tr>
      <tr><td>Pantry</td><td>Refill Air Galon Pantry 106,107,108</td><td><input type="checkbox"></td><td><input></td></tr>
      <tr><td>Pantry</td><td>Bersihkan Rak/Lemari alat makan</td><td><input type="checkbox"></td><td><input></td></tr>
      <tr><td>Pantry</td><td>Cuci Alat Makan</td><td><input type="checkbox"></td><td><input></td></tr>
      <tr><td>Pantry</td><td>Cuci Alat Makan</td><td><input type="checkbox"></td><td><input></td></tr>
      <tr><td>Pantry</td><td>Cuci Alat Makan</td><td><input type="checkbox"></td><td><input></td></tr>
    </tbody>
  </table><br>

  <button onclick="simpan()">Simpan</button>
</div>

<script>
const user = localStorage.getItem('user');
if(!user) location.href='login.html';
document.getElementById('user').innerText = 'User: ' + user;

const inputTanggal = document.getElementById('tanggal');
const warning = document.getElementById('warning');

function setToday(){
  let d = new Date();
  while(d.getDay()==0 || d.getDay()==6){ d.setDate(d.getDate()+1); }
  inputTanggal.valueAsDate = d;
  cek();
}

function cek(){
  const key = user+'_'+inputTanggal.value;
  const data = JSON.parse(localStorage.getItem('filled')||'{}');
  if(!data[key]){
    warning.style.display='inline';
    inputTanggal.classList.add('date-warn');
  }else{
    warning.style.display='none';
    inputTanggal.classList.remove('date-warn');
  }
}

function simpan(){
  const data = JSON.parse(localStorage.getItem('filled')||'{}');
  data[user+'_'+inputTanggal.value] = true;
  localStorage.setItem('filled', JSON.stringify(data));
  alert('Tersimpan');
  cek();
}

inputTanggal.onchange = ()=>{
  const d = new Date(inputTanggal.value);
  if(d.getDay()==0 || d.getDay()==6){
    alert('Sabtu & Minggu tidak termasuk');
    setToday();
  }
  cek();
};

function logout(){
  localStorage.removeItem('user');
  location.href='login.html';
}

setToday();
</script>

</body>
</html>
